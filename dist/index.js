(function(a,b){"object"==typeof exports&&"undefined"!=typeof module?module.exports=b():"function"==typeof define&&define.amd?define(b):(a=a||self,a.Cppkies=b())})(this,function(){'use strict';var H=Math.abs,I=Math.pow,J=Math.floor,K=Math.max;function a(a){return a instanceof Function?a():a}function b(a){return a.replace(/([.*+?^=!:${}()|\[\]\/\\])/g,"\\$1")}function c(c,d,e,f,g){for(var h in void 0===g&&(g={}),g)if(!/[a-zA-Z_$][0-9a-zA-Z_$]*/.test(h))throw new Error("Invalid context variable name!");var j,k=c.toString(),m=null===d;m||(d=a(d),j="string"==typeof d?new RegExp(b(d),"g"):d),e=a(e);var n=/(\)[^{]*{)/,o=/(}?)$/;switch(m||j.test(k)||console.warn("Nothing to inject."),f){case"before":k=m?k.replace(n,"$1"+e):k.replace(j,""+e+d);break;case"replace":k=m?""+e:k.replace(j,""+e);break;case"after":k=m?k.replace(o,e+"$1"):k.replace(j,""+d+e);break;default:throw new Error("where Parameter must be \"before\", \"replace\" or \"after\"");}var p="";for(var h in g)p+="var "+h+" = globalThis.tempCtx."+h+"\n";globalThis.tempCtx=g;var q=new Function(p+"globalThis.tempCtx = null\nreturn ("+k+")")();return q.prototype=c.prototype,q}function d(a,b){for(var c in b)a[c]=b[c]}function e(a){return a.charAt(0).toUpperCase()+a.slice(1).toLowerCase()}function f(a,b){return a.hasOwnProperty(b)}function g(){na.save=O={mods:{},foreign:S,saveVer:1}}function h(a){return O.foreign.buildings[a.name]||P}function i(a){var b=a.amount,c=a.bought,d=a.free,e=a.totalCookies,f=a.level,g=a.muted,h=a.minigameSave,i=a.name;O.foreign.buildings[i]={amount:b,bought:c,free:d,totalCookies:e,level:f,muted:g,minigameSave:h}}function j(a){return O.foreign.upgrades[a.name]||Q}function k(a){O.foreign.upgrades[a.name]={unlocked:!!a.unlocked,bought:!!a.bought}}function m(a){return O.foreign.achievements[a.name]||R}function n(a){O.foreign.achievements[a.name]={won:!!a.won}}function o(a){switch(g(),a.saveVer){case 0:O.foreign.buildings=a.foreign.buildings;break;default:throw new Error("Invalid save version "+O.saveVer+" (current version is "+1+")");}}function p(){for(var a,b=0,c=na.customBuildings;b<c.length;b++)a=c[b],d(a,h(a));for(var e,f=0,g=na.customUpgrades;f<g.length;f++)e=g[f],d(e,j(e));for(var i,k=0,n=na.customAchievements;k<n.length;k++)i=n[k],d(i,m(i))}function q(){for(var a,b=0,c=na.customBuildings;b<c.length;b++)a=c[b],i(a);for(var d,e=0,f=na.customUpgrades;e<f.length;e++)d=f[e],k(d);for(var g,h=0,j=na.customAchievements;h<j.length;h++)g=j[h],n(g)}function r(a){if(null===a)return!1;if("object"!=typeof a)return!1;if(!f(a,"saveVer")||"number"!=typeof a.saveVer||1<a.saveVer)return!1;if(0===a.saveVer&&!f(a,"exists"))return!1;return!!f(a,"mods")&&!("{}"!==JSON.stringify(a.mods))&&!!f(a,"foreign")&&!!function(b){if("object"!=typeof b)return!1;if(!f(b,"buildings"))return!1;if("object"!=typeof b.buildings)return!1;for(var c in b.buildings){var d=b.buildings[c];if("object"!=typeof d)return!1;for(var e in P)if(typeof P[e]!=typeof d[e])return!1}if(1<=a.saveVer){if(!f(b,"upgrades"))return!1;if("object"!=typeof b.upgrades)return!1;for(var c in b.upgrades){var g=b.upgrades[c];if("object"!=typeof g)return!1;for(var e in Q)if(typeof Q[e]!=typeof g[e])return!1}if(!f(b,"achievements"))return!1;if("object"!=typeof b.achievements)return!1;for(var c in b.achievements){var h=b.achievements[c];if("object"!=typeof h)return!1;for(var e in R)if(typeof R[e]!=typeof h[e])return!1}}return!0}(a.foreign)}function s(a){var b;try{b=JSON.parse(a)}catch(c){""!==a&&console.warn("CPPKIES: Found invalid save, creating new one..."),g(),b=O}r(b)?b.saveVer===1?na.save=O=b:(console.warn("CPPKIES: Found old save, migrating to a new one..."),o(b)):(console.warn("CPPKIES: Found invalid save, creating new one..."),g()),p()}function t(){return q(),JSON.stringify(O)}function u(a,c){function b(){this.constructor=a}T(a,c),a.prototype=null===c?Object.create(c):(b.prototype=c.prototype,new b)}function v(a,b,c,d){return new(c||(c=Promise))(function(e,f){function g(a){try{i(d.next(a))}catch(a){f(a)}}function h(a){try{i(d["throw"](a))}catch(a){f(a)}}function i(a){a.done?e(a.value):new c(function(b){b(a.value)}).then(g,h)}i((d=d.apply(a,b||[])).next())})}function w(a,b){function c(a){return function(b){return d([a,b])}}function d(c){if(e)throw new TypeError("Generator is already executing.");for(;k;)try{if(e=1,h&&(i=2&c[0]?h["return"]:c[0]?h["throw"]||((i=h["return"])&&i.call(h),0):h.next)&&!(i=i.call(h,c[1])).done)return i;switch((h=0,i)&&(c=[2&c[0],i.value]),c[0]){case 0:case 1:i=c;break;case 4:return k.label++,{value:c[1],done:!1};case 5:k.label++,h=c[1],c=[0];continue;case 7:c=k.ops.pop(),k.trys.pop();continue;default:if((i=k.trys,!(i=0<i.length&&i[i.length-1]))&&(6===c[0]||2===c[0])){k=0;continue}if(3===c[0]&&(!i||c[1]>i[0]&&c[1]<i[3])){k.label=c[1];break}if(6===c[0]&&k.label<i[1]){k.label=i[1],i=c;break}if(i&&k.label<i[2]){k.label=i[2],k.ops.push(c);break}i[2]&&k.ops.pop(),k.trys.pop();continue;}c=b.call(a,k)}catch(a){c=[6,a],h=0}finally{e=i=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}var e,h,i,j,k={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return j={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(j[Symbol.iterator]=function(){return this}),j}function x(){for(var b=0,c=0,d=arguments.length;c<d;c++)b+=arguments[c].length;for(var e=Array(b),f=0,c=0;c<d;c++)for(var g=arguments[c],a=0,h=g.length;a<h;a++,f++)e[f]=g[a];return e}function y(a,b){U[a]=b}function z(a){if(V.includes(a))throw new Error("Recursive alias");return(V.push(a),a in U)?z(U[a]):(V=[],a)}function A(a){return new Promise(function(b){var c=new Image;c.addEventListener("load",function(){b(c)}),c.crossOrigin="Anonymous",c.src=a})}function B(a){return new Promise(function(b){a.canvas.toBlob(function(a){b(URL.createObjectURL(a))})})}function C(a,b,c,d,e,f){return new Promise(function(g){c[0]instanceof Array||(c=[c]),c=c;var h={};for(var i in c)for(var j in c[i])if(c[i][j]){if(c[i][j]=c[i][j].toString().toLowerCase(),!(c[i][j]in b))throw new Error("Invalid icon name");h[c[i][j]]=[parseInt(j),parseInt(i)]}var k=document.createElement("canvas").getContext("2d"),m=new Image;m.addEventListener("load",function(){for(var a in k.canvas.width=e[0],k.canvas.height=e[1],h)k.drawImage(m,h[a][0]*d[0],h[a][1]*d[1],d[0],d[1],b[a][0]*d[0],b[a][1]*d[1],d[0],d[1]);var c,i=function(){B(k).then(g)};f&&(c=f(k)),c instanceof Promise?c.then(i):i()}),m.crossOrigin="Anonymous",m.src=a})}function D(a){var b=new M,d=[new N("tooltip",function(){a.tooltip=c(c(a.tooltip,"return","let tempRet = ","replace"),null,"\n//Cppkies injection\n\t\t\t\treturn Cppkies.buildingHooks[this.name].emit(\"tooltip\", tempRet)","after")})];d.forEach(function(a){null===a||void 0===a?void 0:a.func()}),na.hooks.on("buildingCps",function(c){return{building:c.building,cps:Game.Objects[c.building]===a?b.emit("cps",c.cps):c.cps}}),$[a.name]=b}function E(){for(var a,b=0,c=Game.ObjectsById;b<c.length;b++)a=c[b],$[a.name]||D(a)}function F(a){return"fortune"===a.tier}function G(){na.hooks.on("getIcon",function(a){var b=a.icon,c=a.type,d=a.tier;return na.customTiers.forEach(function(a){a.keyName===d.toString()&&a.iconLink&&(b[2]=a.iconLink)}),{icon:b,type:c,tier:d}}),na.hooks.on("getIcon",function(a){var b=a.icon,c=a.type,d=a.tier;return na.customBuildings.forEach(function(a){a.name===c&&a.iconLink&&(b[2]=a.iconLink)}),{icon:b,tier:d,type:c}})}var L,M=function(){function a(){this._events={}}return a.prototype.on=function(a,b){this._events[a]?this._events[a].push(b):this._events[a]=[b]},a.prototype.once=function(a,b){var c=this;this.on(a,function(d){return c.off(a,b),b(d)})},a.prototype.off=function(a,b){this._events[a].splice(this._events[a].indexOf(b),1)},a.prototype.emit=function(a){for(var b=[],c=1;c<arguments.length;c++)b[c-1]=arguments[c];var d=b[0];this._events[a]||(this._events[a]=[]);for(var e,f=0,g=this._events[a];f<g.length;f++)e=g[f],d=e(d);return d},a.prototype.constEmit=function(a){for(var b=[],c=1;c<arguments.length;c++)b[c-1]=arguments[c];this._events[a]||(this._events[a]=[]);for(var d,e=0,f=this._events[a];e<f.length;e++)d=f[e],d(b[0])},a}(),N=function(){return function(a,b){this.value=a,this.func=b}}(),O=null,P={amount:0,bought:0,free:0,totalCookies:0,level:0,muted:0,minigameSave:""},Q={bought:!1,unlocked:!1},R={won:!1},S={buildings:{},upgrades:{},achievements:{}},T=function(a,c){return T=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,c){a.__proto__=c}||function(a,c){for(var b in c)c.hasOwnProperty(b)&&(a[b]=c[b])},T(a,c)},U={},V=[],W={},X={"3d":[0,21],milestone1:[0,22],milestone2:[0,23],milestone3:[0,24],krumblor:[0,25],level1:[0,26],level2:[0,27]},Y={},Z={research:[9,0],cookie:[10,0],mouse:[11,0],multicursor:[12,0],kitten:[18,0]},$={},_=[],aa=function(a){function b(b,c,d,e,f,g,j,k,m,n){var o=this;0!==e[1]&&console.warn("All icon sheets must follow an order, see https://cppkies.js.org/#/CommonProblems#IconOrder?id=relink-column"),0!==f[0]&&console.warn("All big icon sheets must follow an order, see https://cppkies.js.org/#/CommonProblems#IconOrder?id=big-icons"),o=a.call(this,b,c,d,f[1],e[0],g,0,j,k)||this,_.push(o),$[b]||D(o);var p=function(a){if(0>=parseInt(a))return"continue";var b=Game.ObjectsById[a];if(b.canvas=l("rowCanvas"+a),!b.canvas)return"continue";if(b.ctx=b.canvas.getContext("2d"),b.canvas.addEventListener("mouseover",function(){b.mouseOn=!0}),b.canvas.addEventListener("mouseout",function(){b.mouseOn=!1}),b.canvas.addEventListener("mousemove",function(a){var c=b.canvas.getBoundingClientRect();b.mousePos[0]=a.pageX-c.left,b.mousePos[1]=a.pageY-c.top}),b.minigame&&b.minigameLoaded){var c=b.minigame.save();b.minigame.launch(),b.minigame.load(c)}};for(var q in Game.ObjectsById)p(q);o.buildingLink=f[2]||na.buildingLink+"",o.iconLink=z(e[2]||na.iconLink+""),m&&(Game.foolObjects[b]=m),n&&(Game.goldenCookieBuildingBuffs[b]=n),o.iconLink&&$[o.name].on("tooltip",function(a){return o.locked?a:a.replace("background-position","background-image:url("+o.iconLink+");background-position")}),Game.BuildStore(),o.buildingLink&&na.hooks.on("buildStore",function(){l("productIcon"+o.id).style.backgroundImage="url("+o.buildingLink+")",l("productIconOff"+o.id).style.backgroundImage="url("+o.buildingLink+")"}),Game.BuildStore(),o.canvas=l("rowCanvas"+o.id),o.ctx=o.canvas.getContext("2d"),o.pics=[];var r=document.createElement("div");r.className="tinyProductIcon",r.id="mutedProduct"+o.id,r.style.display="none",o.buildingLink&&(r.style.backgroundImage="url("+o.buildingLink+")"),r.style.backgroundPositionX="-"+e[0]+"px",r.style.backgroundPositionY="-"+e[1]+"px",r.addEventListener("click",function(){o.mute(0),window.PlaySound(o.muted?"snd/clickOff.mp3":"snd/clickOn.mp3")}),window.AddEvent(o.canvas,"mouseover",function(){o.mouseOn=!0}),window.AddEvent(o.canvas,"mouseout",function(){o.mouseOn=!1}),o.canvas.addEventListener("mousemove",function(a){var b=o.canvas.getBoundingClientRect();o.mousePos[0]=a.pageX-b.left,o.mousePos[1]=a.pageY-b.top}),l("buildingsMute").appendChild(r);var s=h(o);for(var q in s)o[q]=s[q];return Game.recalculateGains=1,o}return u(b,a),b}(Game.Object),ba=[],ca=function(a){function b(b,c,d,e,f){void 0===f&&(f=function(){});var g=this;e[2]||(e[2]=na.iconLink+""),e[2]=z(e[2]),g=a.call(this,b,"function"==typeof c?"":c,"function"==typeof d?0:d,"function"==typeof e?[0,0]:e,f)||this,"function"==typeof c&&(g.descFunc=c),"function"==typeof d&&(g.priceFunc=d),"function"==typeof e&&(g.iconFunction=e),ba.push(g);var h=j(g);for(var k in h)g[k]=h[k];return g}return u(b,a),b}(Game.Upgrade),da=function(a){function b(b,c,d,e,f,g,h){void 0===g&&(g=["Legacy"]),void 0===h&&(h=function(){});var i=a.call(this,b,c,d,e,h)||this;return i.pool="prestige",i.posX=f[0],i.posY=f[1],i.parents=g.map(function(a){return Game.Upgrades[a]||Game.UpgradesById[a]}),Game.PrestigeUpgrades.push(i),Game.UpgradePositions[i.id]=f,i}return u(b,a),b}(ca),ea=function(a){function b(b,c,d,f){var g=Math.min,h=this;return"string"==typeof d&&(d=Game.Objects[d]),h=a.call(this,b,e(d.plural)+" are <b>twice</b> as efficient.<q>"+c+"</q>",d.basePrice*Game.Tiers[f.toString()].price,Game.GetIcon(d.name,f))||this,Game.SetTier(d.name,f),h.buildingTie1=d,F(h)&&(h.order=19e3,d.fortune=h),isNaN(parseInt(f.toString()))||(f=parseInt(f.toString())),"number"==typeof f&&(h.order=100*(d.id+1)+f,h.order-=75*K(0,g(d.id-4,3))),h}return u(b,a),b}(ca),fa=function(a){function b(b,c,d,f){var g=this;"string"==typeof d&&(d=Game.Objects[d]);var h=d.id-1;return 1===h?h="grandma":h+=" grandmas",g=a.call(this,b,"Grandmas are <b>twice</b> as efficient."+e(d.plural)+" gain <b>+1% CpS</b> per "+h+".<q>"+c+"</q>",d.basePrice*Game.Tiers[2].price,[10,9],Game.Objects.Grandma.redraw)||this,d.grandma=g,g.buildingTie=d,g.order=250+5*(d.id/12),Game.GrandmaSynergies.push(g.name),f&&na.hooks.on("grandmaPic",function(a){if(g.bought)return x(a,[f])}),g}return u(b,a),b}(ca),ga=function(a){function b(b,c,d,f,g){var h=this;return"string"==typeof d&&(d=Game.Objects[d]),"string"==typeof f&&(f=Game.Objects[f]),c=e(d.plural)+" gain <b>+5% CpS</b> per "+f.name.toLowerCase()+".<br>"+e(f.plural)+" gain <b>+0.1% CpS</b> per \n\t\t\t"+d.name.toLowerCase()+".<q>"+c+"</q>",h=a.call(this,b,c,(10*d.basePrice+1*f.basePrice)*Game.Tiers[g].price,Game.GetIcon(d.name,g))||this,h.tier=g,h.buildingTie1=d,h.buildingTie2=f,h.order=5e3,d.synergies.push(h),f.synergies.push(h),h}return u(b,a),b}(ca),ha=[],ia=function(){return function(a,b,c,d,e,f,g,h,i){void 0===d&&(d=!1),void 0===e&&(e="auto"),void 0===f&&(f=null),void 0===g&&(g=null),void 0===h&&(h=null),void 0===i&&(i="auto"),this.name=a,this.color=c,this.upgrades=[],this.special=d,this.keyName="auto"===i?d?a:(Object.keys(Game.Tiers).filter(function(a){return!isNaN(parseInt(a))}).length+1).toString():i,null===f&&(this.unlock=-1),"number"==typeof f&&(this.unlock=f),(!1===d&&null===f||"auto"===f)&&(this.unlock=Game.Tiers[parseInt(this.keyName)-1].unlock+50),"number"==typeof g&&(this.achievUnlock=g),(!1===d&&null===g||"auto"===g)&&(this.achievUnlock=Game.Tiers[parseInt(this.keyName)-1].achievUnlock+50),h&&(this.req=h),this.price="auto"===e?1e8*Game.Tiers[Object.keys(Game.Tiers).filter(function(a){return!isNaN(parseInt(a))}).length.toString()].price:e,this.iconRow=b[1],this.iconLink=z(b[2]||na.iconLink+""),Game.Tiers[this.keyName]=this,ha.push(this)}}(),ja=[],ka=function(a){function b(b,c,e){var f=this;return e[2]||(e[2]=na.iconLink+""),e[2]=z(e[2]),f=a.call(this,b,c,e)||this,d(f,m(f)),ja.push(f),f}return u(b,a),b}(Game.Achievement),la=function(a){function b(b,c,d,e){void 0===e&&(e=I(10,J(1.5*Game.BankAchievements.length+2)));var f=a.call(this,b,"Bake <b>"+toFixed(e)+"</b> cookie"+(1===H(e)?"":"s")+" in one ascension."+(d?"<q>"+d+"</q>":""),c)||this;return f.treshold=e,f.order=100+.01*Game.BankAchievements.length,Game.BankAchievements.push(f),f}return u(b,a),b}(ka),ma=function(a){function b(b,c,d,e){void 0===e&&(e=I(10,J(1.2*Game.BankAchievements.length)));var f=a.call(this,b,"Bake <b>"+toFixed(e)+"</b> cookie"+(1===H(e)?"":"s")+" per second."+(d?"<q>"+d+"</q>":""),c)||this;return f.treshold=e,f.order=200+.01*Game.CpsAchievements.length,Game.CpsAchievements.push(f),f}return u(b,a),b}(ka),na={hooks:null,on:null,iconLink:"",buildingLink:"",buildingHooks:$,buildingHooksById:[],hookAllBuildings:E,customBuildings:_,customUpgrades:ba,customTiers:ha,save:O,onLoad:[],Building:aa,Upgrade:ca,TieredUpgrade:ea,Tier:ia,HeavenlyUpgrade:da,GrandmaSynergy:fa,SynergyUpgrade:ga,Achievement:ka,CpsAchievement:ma,BankAchievement:la,customAchievements:ja,injectCode:c,DEFAULT_ONBUY:function(){Game.UnlockTiered(this),this.amount>=Game.SpecialGrandmaUnlock&&0<Game.Objects.Grandma.amount&&this.grandma&&Game.Unlock(this.grandma.name)},DEFAULT_CPS:function(a){return Game.GetTieredCpsMult(a)*Game.magicCpS(a.name)*a.baseCps},icons:{relinkColumn:function(a,b,c,d){return void 0===d&&(d=!1),v(this,void 0,void 0,function(){var e,f,f,g,h;return w(this,function(i){switch(i.label){case 0:for(f in void 0===c&&(!W[a]&&(W[a]=0),c=W[a]++),e={},X)e[f]=[c,X[f][1]];for(f in Game.Tiers)e[Game.Tiers[f].name.toLowerCase()]=e[f.toString()]=[c,Game.Tiers[f].iconRow];return g=y,h=[a],[4,C(d?z(a):a,e,b,[48,48],[48*(c+1),48*(Object.values(e).reduce(function(a,b){return K(a,b[1])},-Infinity)+1)],function(b){return new Promise(function(c){if(z(a)!==a){var d=new Image;d.addEventListener("load",function(){b.drawImage(d,0,0),c()}),d.src=z(a),d.crossOrigin="Anonymous"}else c()})})];case 1:return g.apply(void 0,h.concat([i.sent()])),[2];}})})},relinkRow:function(a,b,c,d){return void 0===d&&(d=!1),v(this,void 0,void 0,function(){var e,f,f,g,h;return w(this,function(i){switch(i.label){case 0:for(f in void 0===c&&(!Y[a]&&(Y[a]=0),c=Y[a]++),e={},Z)e[f]=[Z[f][0],c];for(f in Game.ObjectsById)e[Game.ObjectsById[f].single.toLowerCase()]=e[f]=[Game.ObjectsById[f].iconColumn,c];return g=y,h=[a],[4,C(d?z(a):a,e,b,[48,48],[48*(Object.values(e).reduce(function(a,b){return K(a,b[0])},-Infinity)+1),48*(c+1)],function(b){return new Promise(function(c){if(z(a)!==a){var d=new Image;d.addEventListener("load",function(){b.drawImage(d,0,0),c()}),d.src=z(a),d.crossOrigin="Anonymous"}else c()})})];case 1:return g.apply(void 0,h.concat([i.sent()])),[2];}})})},patchIconsheet:function(a,b,c){var d;return void 0===c&&(c=!0),v(this,void 0,void 0,function(){var e,f,g,h,i,j,k,m,n,o,p,q,r,s,t;return w(this,function(u){switch(u.label){case 0:return e=document.createElement("canvas").getContext("2d"),[4,A(c?z(a):a)];case 1:for(f=u.sent(),g=[f.width,f.height],(h=0,i=b);h<i.length;h++)j=i[h],48*j[0][0]>g[0]&&(g[0]=48*j[0][0]),48*j[0][1]>g[1]&&(g[1]=48*j[0][1]);e.canvas.width=g[0],e.canvas.height=g[1],e.drawImage(f,0,0),k={},m=0,n=b,u.label=2;case 2:return m<n.length?(o=n[m],p=z((null!==(d=o[1][2])&&void 0!==d?d:na.iconLink)||"img/icons.png"),!!k[p])?[3,4]:(q=k,r=p,[4,A(p)]):[3,6];case 3:q[r]=u.sent(),u.label=4;case 4:e.clearRect(48*o[0][0],48*o[0][1],48,48),e.drawImage(k[p],48*o[1][0],48*o[1][1],48,48,48*o[0][0],48*o[0][1],48,48),u.label=5;case 5:return m++,[3,2];case 6:return s=y,t=[a],[4,B(e)];case 7:return s.apply(void 0,t.concat([u.sent()])),[2];}})})}}};window.Cppkies?L=window.Cppkies:(L=na,function(){return new Promise(function(a){var b=new M,d=[new N("customMenu",function(){Game.UpdateMenu=c(Game.UpdateMenu,null,"\n\t\t\t\t\t// Cppkies injection\n\t\t\t\t\tswitch (Game.onMenu) {\n\t\t\t\t\t\tcase \"prefs\":\n\t\t\t\t\t\t\tCppkies.hooks.emit(\"optionsMenu\")\n\t\t\t\t\t\t\tbreak\n\t\t\t\t\t\tcase \"stats\":\n\t\t\t\t\t\t\tCppkies.hooks.emit(\"statsMenu\")\n\t\t\t\t\t\t\tbreak\n\t\t\t\t\t\tcase \"log\":\n\t\t\t\t\t\t\tCppkies.hooks.emit(\"logMenu\")\n\t\t\t\t\t\t\tbreak\n\t\t\t\t\t}\n\t\t\t\t\tCppkies.hooks.emit(\"menu\")\n\t\t\t\t\t","before")}),new N("preSave",function(){Game.WriteSave=c(Game.WriteSave,null,"\n\t\t\t\t\t// Cppkies injection\n\t\t\t\t\tCppkies.hooks.emit(\"preSave\")\n\t\t\t\t\t","before")}),new N("reset",function(){Game.Reset=c(Game.Reset,null,"\n\t\t\t\t\t// Cppkies injection\n\t\t\t\t\tCppkies.hooks.emit(\"reset\", hard)\n\t\t\t\t\t","before")}),new N("getIcon",function(){Game.GetIcon=c(Game.GetIcon,"return [col,Game.Tiers[tier].iconRow];","\n\t\t\t\t\t// Cppkies Injection\n\t\t\t\t\treturn Cppkies.hooks.emit(\"getIcon\", { icon: [col, Game.Tiers[tier].iconRow], tier: tier, type: type }).icon","replace")}),new N("buildStore",function(){Game.BuildStore=c(Game.BuildStore,null,";\nCppkies.hooks.emit(\"buildStore\")","after")}),new N("grandmaPic",function(){Game.Objects.Grandma.art.pic=c(Game.Objects.Grandma.art.pic,"return choose(list)+'.png'","// Cppkies injection\n\t\t\t\t\tlist = Cppkies.hooks.emit(\"grandmaPic\", list)\n\t\t\t\t\t","before")}),new N("cps",function(){Game.CalculateGains=c(Game.CalculateGains,"Game.cookiesPsRaw=rawCookiesPs;","// Cppkies injection\nrawCookiesPs = Cppkies.hooks.emit(\"rawCps\", rawCookiesPs);\n","before"),Game.CalculateGains=c(Game.CalculateGains,"Game.cookiesPs=Game.runModHookOnValue('cps',Game.cookiesPs);","\n// Cppkies injection\nmult = Cppkies.hooks.emit(\"cpsMult\", mult);\nGame.cookiesPs = Cppkies.hooks.emit(\"cps\", Game.cookiesPs);\n","before")}),new N("cursorFingerMult",function(){Game.Objects.Cursor.cps=c(Game.Objects.Cursor.cps,"var mult=1;","// Cppkies injection\nadd = Cppkies.hooks.emit(\"cursorFingerMult\", add)\n;","before")}),new N("cpc",function(){Game.mouseCps=c(Game.mouseCps,"var num=0;","// Cppkies injection\nadd = Cppkies.hooks.emit(\"cursorFingerMult\", add)\n;","before"),Game.mouseCps=c(Game.mouseCps,"out=Game.runModHookOnValue('cookiesPerClick',out);","// Cppkies injection\nout = Cppkies.hooks.emit(\"cpc\", out)\n;","before")}),new N("buildingCps",function(){Game.CalculateGains=c(Game.CalculateGains,"me.storedTotalCps=me.amount*me.storedCps;","// Cppkies injection (internal, do not use)\nme.storedCps = Cppkies.hooks.emit(\"buildingCps\", { building: i, cps: me.storedCps }).cps;\n","before")})];d.forEach(function(a){var b;null===(b=a.func)||void 0===b?void 0:b.call(a)}),Game.Loader.Load=c(Game.Loader.Load,"img.src=this.domain","\n\t\t\t// Cppkies injection\n\t\t\timg.src = (assets[i].indexOf('http') !== -1 ? \"\" : this.domain)\n","replace"),Game.Objects.Cursor.buyFunction=c(Game.Objects.Cursor.buyFunction,"Game.Unlock('Octillion fingers');","\n \t\t\t// Cppkies injection\n\t\t\tfor(const i in this.tieredUpgrades) {\n\t\t\t\tif (isNaN(parseInt(i))) break\n\t\t\t\tif (this.amount >= Game.Tiers[this.tieredUpgrades[i].tier].unlock - 50) this.tieredUpgrades[i].unlock()\n\t\t\t}\n","after"),Game.Object=c(Game.Object,"Game.ObjectsN++","\n// Cppkies injection\nCppkies.hookAllBuildings();\n","after"),a(b)})}().then(function(a){L.hooks=a,L.on=a.on.bind(a),Game.Notify("Cppkies loaded!","",[32,17]),Game.modSaveData.cppkies||(Game.modSaveData.cppkies="{}"),Game.registerMod("cppkies",{save:t,load:s}),Game.Win("Third-party"),E(),na.onLoad.forEach(function(a){return a()}),na.onLoad=new Proxy(na.onLoad,{set:function(a,b,c){return"length"!==b&&c(),!0}}),window.CPPKIES_ONLOAD||(window.CPPKIES_ONLOAD=[]),window.CPPKIES_ONLOAD.forEach(function(a){return a()}),window.CPPKIES_ONLOAD=new Proxy(na.onLoad,{set:function(a,b,c){return"length"!==b&&c(),!0}}),G(),window.Cppkies=L}));var oa=L;return oa});
//# sourceMappingURL=index.js.map
