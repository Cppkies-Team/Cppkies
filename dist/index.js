(function(a,b){"object"==typeof exports&&"undefined"!=typeof module?module.exports=b():"function"==typeof define&&define.amd?define(b):(a=a||self,a.Cppkies=b())})(this,function(){'use strict';function a(a){return a instanceof Function?a():a}function b(a){return a.replace(/([.*+?^=!:${}()|\[\]\/\\])/g,"\\$1")}function c(c,d,e,f){var g,h=c.toString(),i=null===d;i||(d=a(d),g=new RegExp(b(d),"g")),e=a(e);var j=/(\)[^{]*{)/,k=/(}?)$/;switch(i||g.test(h)||console.warn("Nothing to inject."),f){case"before":h=i?h.replace(j,"$1"+e):h.replace(g,""+e+d);break;case"replace":h=i?""+e:h.replace(g,""+e);break;case"after":h=i?h.replace(k,e+"$1"):h.replace(g,""+d+e);break;default:throw new Error("where Parameter must be \"before\", \"replace\" or \"after\"");}var m=new Function("return ("+h+")")();return m.prototype=c.prototype,m}function d(a,c){function b(){this.constructor=a}i(a,c),a.prototype=null===c?Object.create(c):(b.prototype=c.prototype,new b)}function e(a){var b=[new h("tooltip",[],function(){a.tooltip=c(c(a.tooltip,"return","let ret = ","replace"),null,"\n//Cppkies injection\n\t\tfor(const i in Cppkies.buildingHooks[\""+a.name+"\"].tooltip) {\n\t\t\tconst tempRet = Cppkies.buildingHooks[\""+a.name+"\"].tooltip[i].call(this, ret)\n\t\t\tret = tempRet || ret\n\t\t}\n\t\treturn ret","after")})],d={};b.forEach(function(a){d[a.value]=a.defValue,a.func&&a.func()}),g.buildingHooks[a.name]=d}var f,g={hooks:{},iconLink:"",buildingLink:"",buildingHooks:{},buildingHooksById:[],onLoad:[],Building:null,injectCode:null,DEFAULT_ONBUY:null,DEFAULT_CPS:null},h=function(){return function(a,b,c){this.value=a,this.defValue=b,this.func=c}}(),i=function(a,c){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,c){a.__proto__=c}||function(a,c){for(var b in c)c.hasOwnProperty(b)&&(a[b]=c[b])},i(a,c)},j=function(a){function b(b,c,d,f,h,j,k,m,n){var o=a.call(this,b,c,d,f[0],f[1],h,0,j,k)||this;e(o);var p=function(a){if(0<parseInt(a)){var b=Game.ObjectsById[a];b.canvas=l("rowCanvas"+a),b.ctx=b.canvas.getContext("2d"),AddEvent(b.canvas,"mouseover",function(){b.mouseOn=!0}),AddEvent(b.canvas,"mouseout",function(){b.mouseOn=!1}),AddEvent(b.canvas,"mousemove",function(a){var c=b.canvas.getBoundingClientRect();b.mousePos[0]=a.pageX-c.left,b.mousePos[1]=a.pageY-c.top})}};for(var q in Game.ObjectsById)p(q);var i=Cppkies.buildingLink+"",r=Cppkies.iconLink+"";m&&(Game.foolObjects[b]=m),n&&(Game.goldenCookieBuildingBuffs[b]=n),r&&g.buildingHooks[o.name].tooltip.push(function(a){return o.locked?a:a.replace("background-position","background-image:url("+r+");background-position")}),Game.BuildStore(),i&&g.hooks.postBuildStore.push(function(){l("productIcon"+o.id).style.backgroundImage="url("+i+")",l("productIconOff"+o.id).style.backgroundImage="url("+i+")"}),Game.BuildStore(),o.canvas=l("rowCanvas"+o.id),o.ctx=o.canvas.getContext("2d"),o.context=o.ctx,o.pics=[];var s=document.createElement("div");return s.className="tinyProductIcon",s.id="mutedProduct"+o.id,s.style.display="none",i&&(s.style.backgroundImage="url("+i+")"),s.style.backgroundPositionX="-"+f[0]+"px",s.style.backgroundPositionY="-"+f[1]+"px",s.addEventListener("click",function(){o.mute(0),PlaySound(o.muted?"snd/clickOff.mp3":"snd/clickOn.mp3")}),AddEvent(o.canvas,"mouseover",function(){o.mouseOn=!0}),AddEvent(o.canvas,"mouseout",function(){o.mouseOn=!1}),AddEvent(o.canvas,"mousemove",function(a){var b=o.canvas.getBoundingClientRect();o.mousePos[0]=a.pageX-b.left,o.mousePos[1]=a.pageY-b.top}),l("buildingsMute").appendChild(s),Game.recalculateGains=1,o}return d(b,a),b}(Game.Object);window.Cppkies?(console.warn("Duplicate Cppkies"),f=window.Cppkies):(f=g,f.Building=j,f.injectCode=c,f.DEFAULT_CPS=function(a){return Game.GetTieredCpsMult(a)*Game.magicCpS(a.name)*a.baseCps},f.DEFAULT_ONBUY=function(){Game.UnlockTiered(this),this.amount>=Game.SpecialGrandmaUnlock&&0<Game.Objects.Grandma.amount&&this.grandma&&Game.Unlock(this.grandma.name)},function(){return new Promise(function(a){var b={},d=[new h("customMenu",[],function(){window.Game.UpdateMenu=c(window.Game.UpdateMenu,null,"\n\t\t\t\t\t// Cppkies injection\n\t\t\t\t\tswitch (Game.onMenu) {\n\t\t\t\t\t\tcase \"prefs\":\n\t\t\t\t\t\t\tfor(const i in Cppkies.hooks.customOptionsMenu) Cppkies.hooks.customOptionsMenu[i]();\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tcase \"stats\":\n\t\t\t\t\t\t\tfor(const i in Cppkies.hooks.customStatsMenu) Cppkies.hooks.customStatsMenu[i]();\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tcase \"log\":\n\t\t\t\t\t\t\tfor(const i in Cppkies.hooks.customInfoMenu) Cppkies.hooks.customInfoMenu[i]();\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tdefault:\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t\tfor(const i in Cppkies.hooks.customMenu) Cppkies.hooks.customMenu[i]();\n\t\t\t\t\t","before")}),new h("customOptionsMenu",[]),new h("customStatsMenu",[]),new h("customInfoMenu",[]),new h("customLoad",[],function(){window.Game.LoadSave=c(window.Game.LoadSave,"if (Game.prefs.showBackupWarning==1)","\n\t\t\t\t\t// Cppkies injection\n\t\t\t\t\tfor(const i in Cppkies.hooks.customLoad) Cppkies.hooks.customLoad[i](); \n\t\t\t\t\t","before")}),new h("customReset",[],function(){window.Game.Reset=c(window.Game.Reset,null,"\n\t\t\t\t\t// Cppkies injection\n\t\t\t\t\tfor(const i in Cppkies.hooks.customReset) Cppkies.hooks.customReset[i](hard);\n\t\t\t\t\t","before")}),new h("customBeautify",[],function(){window.Beautify=c(window.Beautify,"return negative?'-'+output:output+decimal;","\n\t\t\t\t\t// Cppkies injection\n\t\t\t\t\tlet ret = negative?'-'+output:output+decimal;\n\t\t\t\t\tfor(const i in Cppkies.hooks.customBeautify) {\n\t\t\t\t\t\tlet returnedValue = Cppkies.hooks.customBeautify[i](value, floats, ret)\n\t\t\t\t\t\tret = returnedValue ? returnedValue : ret\n\t\t\t\t\t};\n\t\t\t\t\treturn ret;\n\t\t\t\t\t","replace")}),new h("customTooltipDraw",[],function(){window.Game.tooltip.draw=c(window.Game.tooltip.draw,null,"\n\t\t\t\t\t// Cppkies injection\n\t\t\t\t\tfor(const i in Cppkies.hooks.customTooltipDraw) Cppkies.hooks.customTooltipDraw[i](from, text, origin);\n\t\t\t\t\t","before")}),new h("customTooltipUpdate",[],function(){window.Game.tooltip.update=c(window.Game.tooltip.update,null,"\n\t\t\t\t\t// Cppkies injection\n\t\t\t\t\tfor(const i in Cppkies.hooks.customTooltipUpdate) Cppkies.hooks.customTooltipUpdate[i]();\n\t\t\t\t\t","before")}),new h("customHowMuchPrestige",[],function(){window.Game.HowMuchPrestige=c(c(window.Game.HowMuchPrestige,"return","let ret =","replace"),";","\n\t\t\t\t\t// Cppkies injection\n\t\t\t\t\tfor(const i in Cppkies.hooks.customHowManyCookiesReset){ \n\t\t\t\t\t\treturnedValue = Cppkies.hooks.customHowManyCookiesReset[i](chips, ret);\n\t\t\t\t\t\tret = returnedValue ? returnedValue : ret\n\t\t\t\t\t}\n\t\t\t\t\treturn ret;\n\t\t\t\t\t","after")}),new h("customHeavenlyMultiplier",[]),new h("UpdateAscensionModePrompt",[]),new h("customReincarnate",[]),new h("customAscend",[]),new h("customUpdateAscend",[]),new h("customBuildAscendTree",[]),new h("customAscend",[]),new h("customGrandmaPic",[],function(){window.Game.Objects.Grandma.art.pic=c(window.Game.Objects.Grandma.art.pic,"return choose(list)+'.png'","// Cppkies injection\n\t\t\t\t\tlist = list.concat(Cppkies.hooks.customGrandmaPic.map(val=>val() || null).filter(val=>val !== null))\n\t\t\t\t\t","before")}),new h("postBuildStore",[],function(){var a=window.Game.BuildStore.toString();window.Game.BuildStore=new Proxy(window.Game.BuildStore,{apply:function(a,b,c){for(var d in a.apply(b,c),g.hooks.postBuildStore)g.hooks.postBuildStore[d]()}}),window.Game.BuildStore.toString=function(){return a}})];d.forEach(function(a){b[a.value]=a.defValue,a.func&&a.func()}),window.Game.Loader.Load=c(window.Game.Loader.Load,"img.src=this.domain","img.src=(assets[i].indexOf('http') !== -1 ? \"\" : this.domain)","replace"),a(b)})}().then(function(a){f.hooks=a,window.Game.Note.call({},"Cppkies loaded!","",[32,17]),window.Game.Win("Third-party"),g.onLoad.forEach(function(a){return a()}),g.onLoad=new Proxy(g.onLoad,{set:function(a,b,c){return"length"!==b&&c(),!0}})}));var k=f;return k});
//# sourceMappingURL=index.js.map
