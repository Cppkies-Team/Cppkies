import{c as e,b as r}from"./_tslib-e6397ef4.js";import{customUpgrades as i,miscValues as t}from"./vars.js";import{resolveIcon as n}from"./spritesheets.js";import{toSentenseCase as a}from"./helpers.js";import{loadUpgrade as o}from"./saves.js";import"./eventemitter.js";import"./generic.js";import{a as s,b as u}from"./basegame-16a3dd65.js";var p=function(r){function t(e,t,a,s,u){void 0===u&&(u=function(){});var p=r.call(this,e,"function"==typeof t?"":t,"function"==typeof a?0:a,"function"==typeof s?[0,0]:n(s),u)||this;"function"==typeof t&&(p.descFunc=t),"function"==typeof a&&(p.priceFunc=a),"function"==typeof s&&(p.iconFunction=function(){return n(s())}),i.push(p);var c=o(p);for(var m in c)p[m]=c[m];return Game.upgradesToRebuild=1,p.bought&&Game.CountsAsUpgradeOwned(p.pool)&&Game.UpgradesOwned++,p}return e(t,r),t}(Game.Upgrade),c=function(r){function i(e,i,t,n,a,o,s){void 0===o&&(o=["Legacy"]),void 0===s&&(s=function(){});var u=r.call(this,e,i,t,n,s)||this;return u.pool="prestige",u.posX=a[0],u.posY=a[1],u.parents=o.map((function(e){return Game.Upgrades[e]||Game.UpgradesById[e]})),Game.PrestigeUpgrades.push(u),Game.UpgradePositions[u.id]=a,u}return e(i,r),i}(p);var m=function(r){function i(e,i,t,n){var o=this;return"string"==typeof t&&(t=Game.Objects[t]),o=r.call(this,e,a(t.plural)+" are <b>twice</b> as efficient.<q>"+i+"</q>",t.basePrice*Game.Tiers[n].price,Game.GetIcon(t.name,n))||this,Game.SetTier(t.name,n),o.buildingTie1=t,"fortune"===o.tier&&(o.order=19e3,t.fortune=o),isNaN(parseInt(n.toString()))||(n=parseInt(n.toString())),"number"==typeof n&&(o.order=100*(t.id+1)+o.id/1e3,o.order-=75*Math.max(0,Math.min(t.id-4,3)),t.id>=8&&(o.order-=75)),"fortune"===n&&Game.Tiers[n].upgrades.push(o),t.buyFunction.apply(t),o}return e(i,r),i}(p),l=function(i){function t(e,t,n,o){var u=this;if(o){if(!o.endsWith(".png"))throw new Error("Can't use the grandma picture URL \""+o+'", URL must end with .png');o=o.substring(0,o.length-4)}"string"==typeof n&&(n=Game.Objects[n]);var p=n.id-1;return 1===p?p="grandma":p+=" grandmas",u=i.call(this,e,"Grandmas are <b>twice</b> as efficient. "+a(n.plural)+" gain <b>+1% CpS</b> per "+p+".<q>"+t+"</q>",n.basePrice*Game.Tiers[2].price,[10,9,""],Game.Objects.Grandma.redraw)||this,n.grandma=u,u.buildingTie=n,u.order=250+u.id/1e3,n.id>=12&&(u.order+=5),Game.GrandmaSynergies.push(u.name),o&&s.on("grandmaPic",(function(e){return u.bought?r(e,[o]):e})),Game.Objects.Grandma.redraw(),n.buyFunction.apply(n),u}return e(t,i),t}(p),d=function(r){function i(e,i,t,n,o){var s=this;"string"==typeof t&&(t=Game.Objects[t]),"string"==typeof n&&(n=Game.Objects[n]);var u=Game.GetIcon(t.name,o);if(t.basePrice>n.basePrice){var p=t;t=n,n=p}return(s=r.call(this,e,a(t.plural)+" gain <b>+5% CpS</b> per "+n.name.toLowerCase()+".<br>"+a(n.plural)+" gain <b>+0.1% CpS</b> per \n\t\t\t"+t.name.toLowerCase()+".<q>"+i+"</q>",(10*t.basePrice+1*n.basePrice)*Game.Tiers[o].price,u)||this).tier=o,s.buildingTie1=t,s.buildingTie2=n,s.order=5e3+s.id/1e3,t.synergies.push(s),n.synergies.push(s),Game.Tiers[o].upgrades.push(s),Game.RebuildUpgrades(),t.buyFunction.apply(t),s}return e(i,r),i}(p),f=[5,7,8,9,10],g=function(r){function i(e,i,t,n){void 0===n&&(n=20);var a=this,o=Game.Objects.Cursor,p=parseInt(t.toString());return(a=r.call(this,e,"Multiplies the gain from Thousand fingers by <b>"+n+"</b>.<q>"+i+"</q>",Game.Tiers[t].special||isNaN(p)?o.basePrice*Game.Tiers[t].price:Math.pow(10,f[Math.min(p-4,f.length-1)]+3*Math.max(p-8,0)),Game.GetIcon(o.name,t))||this).tier=t,a.pool="",a.order=100+a.id/1e3,s.on("cursorFingerMult",(function(e){return a.bought?e*n:e})),Game.Tiers[t].special||isNaN(p)||u.Cursor.on("buy",(function(){o.amount>=(4===p?25:50*(p-4))&&Game.Unlock(a.name)})),"fortune"===t&&Game.Tiers[t].upgrades.push(a),Game.Objects.Cursor.buyFunction.apply(Game.Objects.Cursor),a}return e(i,r),i}(p),h={1:5,2:4,4:4,default:3};function G(e){for(var r,i=1,t=1;t<=e;t++)i+=null!==(r=h[t])&&void 0!==r?r:h.default;return 9*Math.pow(10,i)}var b=[.1,.125,.15,.175,.2,.2,.2,.2,.2,.175,.15,.125,.115],y=function(r){function i(e,i,t,n,a,o){void 0===n&&(n=Game.Tiers[t].special||isNaN(parseInt(t.toString()))?null:b[(parseInt(t.toString())-1)%(b.length-1)]),void 0===o&&(o=Game.Tiers[t].special||isNaN(parseInt(t.toString()))?null:1===t?.5:t-1);var u=r.call(this,e,"You gain <b>more CpS</b> the more milk you have.<q>"+i+"</q>",Game.Tiers[t].special||isNaN(parseInt(t.toString()))?null!=a?a:0:G(t),Game.GetIcon("Kitten",t))||this;return u.tier=t,u.kitten=!0,u.pool="",null===n&&console.warn("Please make sure to specify the power if the kitten tier is special"),(Game.Tiers[t].special||isNaN(parseInt(t.toString())))&&void 0===a&&console.warn("Please make sure to specify the cost if the kitten tier is special"),null!==o&&s.on("logic",(function(){Game.milkProgress>=o&&Game.Unlock(u.name)})),u.order=2e4+u.id/1e3,null!==n&&s.on("rawCpsMult",(function(e){var r=u.bought?1+Game.milkProgress*n*window.__INTERNAL_CPPKIES_HOOKS__.hiddenMilkMult:1;return Game.cookiesMultByType.kittens*=r,e*r})),Game.UpgradesByPool.kitten.push(u),"fortune"===t&&Game.Tiers[t].upgrades.push(u),u}return e(i,r),i}(p),v=function(r){function i(e,i,t,n){void 0===n&&(n=1);var a=r.call(this,e,"Clicking gains <b>+"+n+"% of your CpS</b>.<q>"+i+"</q>",Math.pow(10,3+2*parseInt(t.toString())),Game.GetIcon("Mouse",t))||this;a.tier=t,a.pool="";var o=parseInt(t.toString());return a.order=150+a.id/1e3,s.on("cpcAdd",(function(e){return a.bought?e+Game.cookiesPs*n/100:e})),Game.Tiers[t].special||isNaN(o)||s.on("check",(function(){Game.handmadeCookies>=Math.pow(10,1+2*o)&&Game.Unlock(a.name)})),"fortune"===t&&Game.Tiers[t].upgrades.push(a),a}return e(i,r),i}(p),k=function(r){function i(e,i,n,a,o,s,u){var p,c=r.call(this,e,"Cookie production multiplier <b>+"+Beautify("function"==typeof o?o():o,1)+"%</b>.<q>"+i+"</q>",n,a)||this;return c.power=o,c.pool="cookie",c.order=(null!==(p=null!=u?u:t.cookieOrder)&&void 0!==p?p:10020)+c.id/1e3,c.unlockAt={name:e,cookies:("function"==typeof n?n():n)/20,require:null==s?void 0:s.require,season:null==s?void 0:s.season},Game.UnlockAt.push(c.unlockAt),Game.UpgradesByPool.cookie.push(c),Game.cookieUpgrades.push(c),c}return e(i,r),i}(p);export{k as CookieUpgrade,g as CursorUpgrade,l as GrandmaSynergy,c as HeavenlyUpgrade,y as KittenUpgrade,v as MouseUpgrade,d as SynergyUpgrade,m as TieredUpgrade,p as Upgrade,G as computeKittenCost,h as kittenPriceRules};
