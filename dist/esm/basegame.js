import"./tslib.es6-9a9d7607.js";import{injectCode as e,injectCodes as t}from"./helpers.js";import{HOOKS_VERSION as n,Injection as i}from"./generic.js";import{ReturnableEventEmitter as a}from"./eventemitter.js";import{buildingHooks as o,createBuildingHooks as r}from"./buildings.js";var s=new a;function c(){return new Promise((function(a){if(window.__INTERNAL_CPPKIES_HOOKS__){if(window.__INTERNAL_CPPKIES_HOOKS__.hooksVersion>n)return s.setForwardTarget(window.__INTERNAL_CPPKIES_HOOKS__.basegame),window.__INTERNAL_CPPKIES_HOOKS__.basegame;window.__INTERNAL_CPPKIES_HOOKS__.basegame.setForwardTarget(s)}[new i("menu",1,(function(){Game.UpdateMenu=e(Game.UpdateMenu,null,'\n\t\t\t\t\t// Cppkies injection\n\t\t\t\t\tswitch (Game.onMenu) {\n\t\t\t\t\t\tcase "prefs":\n\t\t\t\t\t\t\t__INTERNAL_CPPKIES_HOOKS__.basegame.emit("optionsMenu")\n\t\t\t\t\t\t\tbreak\n\t\t\t\t\t\tcase "stats":\n\t\t\t\t\t\t\t__INTERNAL_CPPKIES_HOOKS__.basegame.emit("statsMenu")\n\t\t\t\t\t\t\tbreak\n\t\t\t\t\t\tcase "log":\n\t\t\t\t\t\t\t__INTERNAL_CPPKIES_HOOKS__.basegame.emit("logMenu")\n\t\t\t\t\t\t\tbreak\n\t\t\t\t\t}\n\t\t\t\t\t__INTERNAL_CPPKIES_HOOKS__.basegame.emit("menu")\n\t\t\t\t\t',"after")})),new i("preSave",1,(function(){Game.WriteSave=e(Game.WriteSave,null,'\n\t\t\t\t\t// Cppkies injection\n\t\t\t\t\t__INTERNAL_CPPKIES_HOOKS__.basegame.emit("preSave")\n\t\t\t\t\t',"before")})),new i("postSave",1,(function(){Game.WriteSave=e(Game.WriteSave,"if (type==2 || type==3)",'\n\t\t\t\t\t// Cppkies injection\n\t\t\t\t\t__INTERNAL_CPPKIES_HOOKS__.basegame.emit("postSave")\n\t\t\t\t\t',"before")})),new i("reset",1,(function(){Game.Reset=e(Game.Reset,null,'\n\t\t\t\t\t// Cppkies injection\n\t\t\t\t\t__INTERNAL_CPPKIES_HOOKS__.basegame.constEmit("reset", hard)\n\t\t\t\t\t',"before")})),new i("reincarnate",1,(function(){Game.registerHook("reincarnate",(function(){return s.emit("reincarnate")}))})),new i("getIcon",1,(function(){Game.GetIcon=t(Game.GetIcon,[["return [col,Game.Tiers[tier].iconRow];",'// Cppkies Injection\n\t\t\t\t\treturn __INTERNAL_CPPKIES_HOOKS__.basegame.emit("getIcon", { icon: [col, Game.Tiers[tier].iconRow], tier: tier, type: type }).icon',"replace"],["col=18;",'else if (type === "Mouse") col = 11;',"after"]])})),new i("buildStore",1,(function(){Game.BuildStore=e(Game.BuildStore,null,';\n__INTERNAL_CPPKIES_HOOKS__.basegame.emit("buildStore")',"after")})),new i("grandmaPic",1,(function(){Game.Objects.Grandma.art.pic=e(Game.Objects.Grandma.art.pic,"return choose(list)+'.png'",'// Cppkies injection\n\t\t\t\t\tlist = __INTERNAL_CPPKIES_HOOKS__.basegame.emit("grandmaPic", list)\n\t\t\t\t\t',"before")})),new i("cps",1,(function(){Game.CalculateGains=t(Game.CalculateGains,[["var rawCookiesPs=Game.cookiesPs*mult;",'// Cppkies injection\n\t\t\t\t\tGame.cookiesPs = __INTERNAL_CPPKIES_HOOKS__.basegame.emit("rawCps", Game.cookiesPs);\n\t\t\t\t\tmult = __INTERNAL_CPPKIES_HOOKS__.basegame.emit("rawCpsMult", mult);\n',"before"],["Game.cookiesPs=Game.runModHookOnValue('cps',Game.cookiesPs);",'// Cppkies injection\n\t\t\t\t\t\tmult = __INTERNAL_CPPKIES_HOOKS__.basegame.emit("cpsMult", mult);\n',"before"]]),Game.registerHook("cps",(function(e){return s.emit("cps",e)}))})),new i("cursorFingerMult",1,(function(){Game.Objects.Cursor.cps=e(Game.Objects.Cursor.cps,"var mult=1;",'// Cppkies injection\nadd = __INTERNAL_CPPKIES_HOOKS__.basegame.emit("cursorFingerMult", add);\n',"before")})),new i("cpc",1,(function(){Game.mouseCps=t(Game.mouseCps,[["var num=0;",'// Cppkies injection\n\t\t\t\t\t\tadd = __INTERNAL_CPPKIES_HOOKS__.basegame.emit("cursorFingerMult", add);\n',"before"],["var out",'// Cppkies injection\n\t\t\t\t\t\tadd = __INTERNAL_CPPKIES_HOOKS__.basegame.emit("cpcAdd", add);\n',"before"]]),Game.registerHook("cookiesPerClick",(function(e){return s.emit("cpc",e)}))})),new i("buildingCps",1,(function(){Game.CalculateGains=e(Game.CalculateGains,"me.storedTotalCps=me.amount*me.storedCps;",'// Cppkies injection (internal, do not use)\nme.storedCps = __INTERNAL_CPPKIES_HOOKS__.basegame.emit("buildingCps", { building: i, cps: me.storedCps }).cps;\n',"before")})),new i("logic",1,(function(){Game.registerHook("logic",(function(){return s.emit("logic")}))})),new i("draw",1,(function(){Game.registerHook("draw",(function(){return s.emit("draw")}))})),new i("check",1,(function(){Game.registerHook("check",(function(){return s.emit("check")}))})),new i("ticker",1,(function(){Game.getNewTicker=e(Game.getNewTicker,"Game.TickerAge=Game.fps*10;",'// Cppkies injection\nlist = __INTERNAL_CPPKIES_HOOKS__.basegame.emit("ticker", list);\n',"before")})),new i("specialPic",1,(function(){Game.DrawSpecial=e(Game.DrawSpecial,"if (hovered || selected)",'// Cppkies injection\nconst override = __INTERNAL_CPPKIES_HOOKS__.basegame.emit("specialPic", {tab: Game.specialTabs[i], frame: frame, pic: pic})\npic = override.pic\nframe = override.frame;\n',"before"),Game.ToggleSpecialMenu=e(Game.ToggleSpecialMenu,"else {pic='dragon.png?v='+Game.version;frame=4;}",'// Cppkies injection\nconst override = __INTERNAL_CPPKIES_HOOKS__.basegame.emit("specialPic", {tab: Game.specialTab, frame: frame, pic: pic})\npic = override.pic\nframe = override.frame;\n',"after")})),new i("autoMoveDragonLevels",1,(function(){Game.ToggleSpecialMenu=t(Game.ToggleSpecialMenu,[[">=5",'>=Game.dragonLevels.findIndex(val => val.name === "Krumblor, cookie hatchling")',"replace"],[">=25",'>=Game.dragonLevels.findIndex(val => val.action === "Train secondary aura<br><small>Lets you use two dragon auras simultaneously</small>") + 1',"replace"]])})),new i("loaderFreedom",1,(function(){Game.Loader.Load=e(Game.Loader.Load,"img.src=this.domain","\n\t\t\t// Cppkies injection\n\t\t\timg.src = (assets[i].indexOf('http') !== -1 ? \"\" : this.domain)\n","replace"),Game.UpdateMenu=t(Game.UpdateMenu,[["url(img/'+milk.pic+'.png)","url(' + (milk.pic.indexOf('http') >= 0 ? milk.pic : 'img/'+milk.pic) + '.png)","replace"],["img/icons.png?v='+Game.version+'","' + (Game.Milks[i].iconLink ? Game.Milks[i].iconLink : 'img/icons.png?v='+Game.version) + '","replace"]])})),new i("buildingAutoHook",1,(function(){Game.Object=e(Game.Object,"Game.ObjectsN++","\n// Cppkies injection\n__INTERNAL_CPPKIES_HOOKS__.createBuildingHooks(this);\n","after")})),new i("milkMult",1,(function(){Game.CalculateGains=e(Game.CalculateGains,"var catMult=1;","// Cppkies injection\n\t\t\t__INTERNAL_CPPKIES_HOOKS__.hiddenMilkMult = milkMult;\n","before")}))].forEach((function(e){return e.runHook()})),window.__INTERNAL_CPPKIES_HOOKS__={basegame:s,buildings:o,hiddenMilkMult:1,createBuildingHooks:r,hooksVersion:n},a(s)}))}export default s;export{c as main};
