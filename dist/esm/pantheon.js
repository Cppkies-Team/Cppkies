import"./tslib.es6-ac47674d.js";import"./vars.js";import{toSentenseCase as e}from"./helpers.js";import"./lz-string.js";import{save as t}from"./saves.js";import{shouldRunVersionedMinigame as o}from"./generic.js";import"./eventemitter.js";import"./buildings.js";import i from"./basegame.js";import{minigamePromises as n}from"./minigamePromises.js";var s;function d(e,t){var o,i,n;if(!s)throw new Error("The pantheon minigame has not loaded yet!");var d=document.querySelector("#templeGod"+e.id);if(d){if(d.className="ready templeGod titleFont",d.style.transform="none",-1!==t){var a=s.godsById[s.slot[t]],r=document.querySelector("#templeSlot"+t);if(a){var l=document.querySelector("#templeGod"+a.id);if(!l)return;if(-1!==e.slot)null===(o=document.querySelector("#templeSlot"+e.slot))||void 0===o||o.appendChild(l);else{var m=document.querySelector("#templeGodPlaceholder"+a.id);m&&(null===(i=m.parentNode)||void 0===i||i.insertBefore(l,m))}}r&&r.appendChild(d)}else{var p=document.querySelector("#templeGodPlaceholder"+e.id);p&&(null===(n=p.parentNode)||void 0===n||n.insertBefore(d,p),p.style.display="none")}s.slotGod(e,t)}}n.Temple.then((function(){return s=Game.Objects.Temple.minigame}));var a=function(o,i,n,a,r,l){var m,p=this;if(this.icon=n,this.slot=-1,!s)throw new Error("The pantheon minigame has not loaded yet!");this.quote=r||void 0,this.name=l||e(o)+", Spirit of "+e(i),a&&(a[1]&&(this.desc1=a[1]),a[2]&&(this.desc2=a[2]),a[3]&&(this.desc3=a[3]),a.before&&(this.descBefore=a.before),a.after&&(this.descAfter=a.after),a.active&&(this.activeDescFunc=a.active)),this.id=s.godsById.length,s.godsById.push(this),s.gods[i]=this;var c,h,u,v=document.createElement("div");v.classList.add("ready","templeGod","templeGod"+this.id%4,"titleFont"),v.id="templeGod"+this.id,c=v,h=s.godTooltip(this.id),u="this",c.addEventListener("mouseover",(function(){Game.tooltip.dynamic="function"==typeof h?1:0,Game.tooltip.draw(c,h,u),Game.tooltip.wobble()})),c.addEventListener("mouseout",(function(){return Game.tooltip.shouldHide=1}));var f=document.createElement("div");f.classList.add("usesIcon","shadowFilter","templeIcon"),f.style.backgroundPosition=48*-n[0]+"px "+48*-n[1]+"px",n[2]&&(f.style.backgroundImage="url("+n[2]+")"),v.appendChild(f);var g=document.createElement("div");g.classList.add("templeSlotDrag"),g.id="templeGodDrag"+this.id,g.addEventListener("mousedown",(function(e){0===e.button&&s&&s.dragGod(p)})),g.addEventListener("mouseup",(function(e){0===e.button&&s&&s.dropGod()})),v.appendChild(g);var y=document.createElement("div");y.classList.add("templeGodPlaceholder"),y.id="templeGodPlaceholder"+this.id;var G=document.querySelector("#templeGods");if(G&&(G.appendChild(v),G.appendChild(y)),null===(m=t.minigames)||void 0===m?void 0:m.pantheon)for(var S in s.slotNames)t.minigames.pantheon.slots[S]===this.id&&d(this,parseInt(S))};o("Pantheon",1)&&(i.on("preSave",(function(){if(s)for(var e in t.minigames||(t.minigames={}),t.minigames.pantheon||(t.minigames.pantheon={slots:[]}),s.slotNames)-1!==s.slot[e]&&(t.minigames.pantheon.slots[e]="sync"),s.godsById[s.slot[e]]instanceof a&&(t.minigames.pantheon.slots[e]=s.slot[e],s.slot[e]=-1)})),i.on("postSave",(function(){var e;if(s&&(null===(e=t.minigames)||void 0===e?void 0:e.pantheon))for(var o in s.slotNames){var i=t.minigames.pantheon.slots[o];void 0!==i&&"sync"!==i&&(s.slot[o]=i)}})),i.on("reset",(function(){var e;(null===(e=t.minigames)||void 0===e?void 0:e.pantheon)&&(t.minigames.pantheon.slots=[])})));export{a as Spirit,d as slotGod};
