import{c as n}from"./tslib.es6-9a9d7607.js";import{customBuildings as e,miscValues as i}from"./vars.js";import{resolveAlias as o}from"./spritesheets.js";import"./helpers.js";import"./lz-string.js";import{loadBuilding as a}from"./saves.js";import"./eventemitter.js";import"./generic.js";import{h as t,b as s,c as r}from"./buildings-2e5b77fa.js";var c=function(c){function u(n,u,m,d,g,p,v,f,b,k){var h,G,L=this;if(Game.Objects[n])throw new Error("Can't create building, \""+n+'" is already used as a building name');0!==d[1]&&console.warn("All icon sheets must follow an order, see https://cppkies.js.org/#/CommonProblems#IconOrder?id=relink-column"),0!==g[0]&&console.warn("All big icon sheets must follow an order, see https://cppkies.js.org/#/CommonProblems#IconOrder?id=big-icons"),L=c.call(this,n,u,m,g[1],d[0],p,0,v,f)||this,e.push(L),s[n]||r(L);var j=function(n){if(parseInt(n)<=0)return"continue";var e=Game.ObjectsById[n];if(e.canvas=l("rowCanvas"+n),!e.canvas)return"continue";if(e.ctx=e.canvas.getContext("2d"),e.canvas.addEventListener("mouseover",(function(){e.mouseOn=!0})),e.canvas.addEventListener("mouseout",(function(){e.mouseOn=!1})),e.canvas.addEventListener("mousemove",(function(n){var i=e.canvas.getBoundingClientRect();e.mousePos[0]=n.pageX-i.left,e.mousePos[1]=n.pageY-i.top})),e.minigame&&e.minigameLoaded){var i=e.minigame.save();e.minigame.launch(),e.minigame.load(i)}};for(var O in Game.ObjectsById)j(O);L.buildingLink=null!==(h=g[2])&&void 0!==h?h:i.buildingLink,L.iconLink=o(null!==(G=d[2])&&void 0!==G?G:i.iconLink),b&&(Game.foolObjects[n]=b),k&&(Game.goldenCookieBuildingBuffs[n]=k),L.iconLink&&s[L.name].on("tooltip",(function(n){return L.locked?n:n.replace("background-position","background-image:url("+L.iconLink+");background-position")})),Game.BuildStore(),L.buildingLink&&t.on("buildStore",(function(){l("productIcon"+L.id).style.backgroundImage="url("+L.buildingLink+")",l("productIconOff"+L.id).style.backgroundImage="url("+L.buildingLink+")"})),Game.BuildStore(),L.canvas=l("rowCanvas"+L.id),L.ctx=L.canvas.getContext("2d"),L.pics=[];var w=document.createElement("div");w.className="tinyProductIcon",w.id="mutedProduct"+L.id,w.style.display="none",L.buildingLink&&(w.style.backgroundImage="url("+L.buildingLink+")"),w.style.backgroundPositionX="-"+d[0]+"px",w.style.backgroundPositionY="-"+d[1]+"px",w.addEventListener("click",(function(){L.mute(0),window.PlaySound(L.muted?"snd/clickOff.mp3":"snd/clickOn.mp3")})),window.AddEvent(L.canvas,"mouseover",(function(){L.mouseOn=!0})),window.AddEvent(L.canvas,"mouseout",(function(){L.mouseOn=!1})),L.canvas.addEventListener("mousemove",(function(n){var e=L.canvas.getBoundingClientRect();L.mousePos[0]=n.pageX-e.left,L.mousePos[1]=n.pageY-e.top})),l("buildingsMute").appendChild(w);var y=a(L);for(var O in y)L[O]=y[O];return Game.recalculateGains=1,L}return n(u,c),u}(Game.Object),u=function(n){return Game.GetTieredCpsMult(n)*Game.magicCpS(n.name)*n.baseCps},m=function(){Game.UnlockTiered(this),this.amount>=Game.SpecialGrandmaUnlock&&Game.Objects.Grandma.amount>0&&this.grandma&&Game.Unlock(this.grandma.name)};t.on("getIcon",(function(n){var i=n.icon,o=n.type,a=n.tier;return e.forEach((function(n){n.name===o&&n.iconLink&&(i[2]=n.iconLink)})),{icon:i,tier:a,type:o}}));export{c as Building,u as DEFAULT_CPS,m as DEFAULT_ONBUY};
