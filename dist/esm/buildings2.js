import{c as n}from"./tslib.es6-9a9d7607.js";import{customBuildings as e,miscValues as i}from"./vars.js";import{resolveAlias as o}from"./spritesheets.js";import"./helpers.js";import"./lz-string.js";import{loadBuilding as t}from"./saves.js";import"./generic.js";import"./eventemitter.js";import{buildingHooks as a,createBuildingHooks as s}from"./buildings.js";import r from"./basegame.js";var c=function(c){function u(n,u,m,d,g,p,v,f,b,k){var G,L,h=this;if(Game.Objects[n])throw new Error("Can't create building, \""+n+'" is already used as a building name');0!==d[1]&&console.warn("All icon sheets must follow an order, see https://cppkies.js.org/#/CommonProblems#IconOrder?id=relink-column"),0!==g[0]&&console.warn("All big icon sheets must follow an order, see https://cppkies.js.org/#/CommonProblems#IconOrder?id=big-icons"),h=c.call(this,n,u,m,g[1],d[0],p,0,v,f)||this,e.push(h),a[n]||s(h);var j=function(n){if(parseInt(n)<=0)return"continue";var e=Game.ObjectsById[n];if(e.canvas=l("rowCanvas"+n),!e.canvas)return"continue";if(e.ctx=e.canvas.getContext("2d"),e.canvas.addEventListener("mouseover",(function(){e.mouseOn=!0})),e.canvas.addEventListener("mouseout",(function(){e.mouseOn=!1})),e.canvas.addEventListener("mousemove",(function(n){var i=e.canvas.getBoundingClientRect();e.mousePos[0]=n.pageX-i.left,e.mousePos[1]=n.pageY-i.top})),e.minigame&&e.minigameLoaded){var i=e.minigame.save();e.minigame.launch(),e.minigame.load(i)}};for(var O in Game.ObjectsById)j(O);h.buildingLink=null!==(G=g[2])&&void 0!==G?G:i.buildingLink,h.iconLink=o(null!==(L=d[2])&&void 0!==L?L:i.iconLink),b&&(Game.foolObjects[n]=b),k&&(Game.goldenCookieBuildingBuffs[n]=k),h.iconLink&&a[h.name].on("tooltip",(function(n){return h.locked?n:n.replace("background-position","background-image:url("+h.iconLink+");background-position")})),Game.BuildStore(),h.buildingLink&&r.on("buildStore",(function(){l("productIcon"+h.id).style.backgroundImage="url("+h.buildingLink+")",l("productIconOff"+h.id).style.backgroundImage="url("+h.buildingLink+")"})),Game.BuildStore(),h.canvas=l("rowCanvas"+h.id),h.ctx=h.canvas.getContext("2d"),h.pics=[];var w=document.createElement("div");w.className="tinyProductIcon",w.id="mutedProduct"+h.id,w.style.display="none",h.buildingLink&&(w.style.backgroundImage="url("+h.buildingLink+")"),w.style.backgroundPositionX="-"+d[0]+"px",w.style.backgroundPositionY="-"+d[1]+"px",w.addEventListener("click",(function(){h.mute(0),window.PlaySound(h.muted?"snd/clickOff.mp3":"snd/clickOn.mp3")})),window.AddEvent(h.canvas,"mouseover",(function(){h.mouseOn=!0})),window.AddEvent(h.canvas,"mouseout",(function(){h.mouseOn=!1})),h.canvas.addEventListener("mousemove",(function(n){var e=h.canvas.getBoundingClientRect();h.mousePos[0]=n.pageX-e.left,h.mousePos[1]=n.pageY-e.top})),l("buildingsMute").appendChild(w);var y=t(h);for(var O in y)h[O]=y[O];return Game.recalculateGains=1,h}return n(u,c),u}(Game.Object),u=function(n){return Game.GetTieredCpsMult(n)*Game.magicCpS(n.name)*n.baseCps},m=function(){Game.UnlockTiered(this),this.amount>=Game.SpecialGrandmaUnlock&&Game.Objects.Grandma.amount>0&&this.grandma&&Game.Unlock(this.grandma.name)};r.on("getIcon",(function(n){var i=n.icon,o=n.type,t=n.tier;return e.forEach((function(n){n.name===o&&n.iconLink&&(i[2]=n.iconLink)})),{icon:i,tier:t,type:o}}));export{c as Building,u as DEFAULT_CPS,m as DEFAULT_ONBUY};
