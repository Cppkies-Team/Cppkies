import"./_tslib-e6397ef4.js";import"./vars.js";import"./helpers.js";import{exportSave as e,importSave as o}from"./saves.js";import"./eventemitter.js";import"./generic.js";import{m as r,a as t}from"./buildings-304ebdb3.js";var n,i=!1,a=new Proxy([],{set:function(e,o,r){return"function"==typeof r&&i&&r(),e[o]=r,!0}}),s=new Promise((function(e){return n=e}));window.__INTERNAL_CPPKIES_HOOKS__?(i=!0,a.forEach((function(e){return e()}))):Game.UpdateMenu.toString().includes("Cppkies")?Game.Prompt('<h3>Hello!</h3>\n<div class="block">\nIt seems like you are trying to load Cppkies 0.3 or higher while having Cppkies 0.2 or lower already loaded.<br/>\nSadly, due to internal changes, Cppkies 0.3 mods are incompatible with Cppkies 0.2 mods. <br/>\n(The mod will still be launched, but it may or may not work correctly)<br/>\n<small>((If you are a mod author, please update your mods to use Cppkies 0.3 or higher.))</small><br/>\n</div>',[["Ok"+(Math.random()<.01?" boomer":""),"Game.ClosePrompt()"]]):r().then((function(){i=!0,Game.Notify("Cppkies loaded!","",[32,17],1.5);var r=document.createElement("div");r.textContent="Cppkies!",document.querySelector("#topBar").insertBefore(r,document.querySelector("#topBar").children[1]),Game.modSaveData.cppkies||(Game.modSaveData.cppkies="{}"),Game.registerMod("cppkies",{save:e,load:o}),Game.Win("Third-party"),t(),a.forEach((function(e){return e()})),window.CPPKIES_ONLOAD||(window.CPPKIES_ONLOAD=[]),window.CPPKIES_ONLOAD.forEach((function(e){return e()})),window.CPPKIES_ONLOAD=new Proxy([],{set:function(e,o,r){return"length"!==o&&r(),!0}}),null==n||n()}));export{s as deffer,a as onLoad};
