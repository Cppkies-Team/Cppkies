import"./tslib.es6-ac47674d.js";import"./vars.js";import"./helpers.js";import"./lz-string.js";import{exportSave as e,importSave as o}from"./saves.js";import"./generic.js";import"./eventemitter.js";import{createBuildingHooks as r}from"./buildings.js";import{main as t}from"./basegame.js";var i,n=!1,a=!window.__INTERNAL_CPPKIES_HOOKS__,s=new Proxy([],{set:function(e,o,r){return"function"==typeof r&&n?r():e[o]=r,!0}}),m=new Promise((function(e){return i=e}));if(a&&Game.UpdateMenu.toString().includes("Cppkies"))Game.Prompt('<h3>Hello!</h3>\n<div class="block">\nIt seems like you are trying to load Cppkies 0.3 or higher while having Cppkies 0.2 or lower already loaded.<br/>\nSadly, due to internal changes, Cppkies 0.3 mods are incompatible with Cppkies 0.2 mods. <br/>\n(The mod will still be launched, but it may or may not work correctly)<br/>\n<small>((If you are a mod author, please update your mods to use Cppkies 0.3 or higher.))</small><br/>\n</div>',[["Ok"+(Math.random()<.01?" boomer":""),"Game.ClosePrompt()"]]);else{for(var p=0,l=Game.ObjectsById;p<l.length;p++){r(l[p])}t().then((function(){if(n=!0,a){Game.Notify("Cppkies loaded!","",[32,17],1.5);var r=document.createElement("div");r.textContent="Cppkies!";var t=document.querySelector("#topBar");t&&t.insertBefore(r,t.children[1]),Game.modSaveData.cppkies||(Game.modSaveData.cppkies="{}"),Game.registerMod("cppkies",{save:e,load:o}),Game.Win("Third-party")}s.forEach((function(e){return e()})),a&&(window.CPPKIES_ONLOAD||(window.CPPKIES_ONLOAD=[]),window.CPPKIES_ONLOAD.forEach((function(e){return e()})),window.CPPKIES_ONLOAD=new Proxy([],{set:function(e,o,r){return"length"!==o&&r(),!0}})),null==i||i()}))}export{m as deffer,s as onLoad};
