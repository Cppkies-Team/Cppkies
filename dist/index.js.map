{"version":3,"file":"index.js","sources":["../src/helpers.ts","../src/index.ts","../src/vars.ts","../src/buildings.ts","../src/injects.ts"],"sourcesContent":["/**\n * The common type for a string, can be either a string or a function that returns a string\n */\nexport type CommonString = string | (() => string)\n/**\n * A helper function which converts a common string to a string.\n * @param value The common string to convert\n * @helper\n */\nexport function getValue(value: CommonString): string {\n\tif (value instanceof Function) return value()\n\treturn value\n}\n/**\n * A helper function which escapes special regex characters.\n * @param str The string to escape\n * @helper\n */\nexport function escapeRegExp(str: string): string {\n\t// eslint-disable-next-line no-useless-escape\n\treturn str.replace(/([.*+?^=!:${}()|\\[\\]\\/\\\\])/g, \"\\\\$1\")\n}\n/**\n * A helper function which replaces(or appends) code in a function, returning the new function, and it's eval free!\n * @param func The source function\n * @param source What to replace(or act as a anchor where to plane), can be null for slicing\n * @param target What to put instead(or before/after) the source\n * @param where Where to insert or replace your injection\n * @helper\n */\nexport function injectCode(\n\tfunc: Function,\n\tsource: CommonString | null,\n\ttarget: CommonString,\n\twhere: \"before\" | \"replace\" | \"after\"\n): Function {\n\tlet newFuncStr = func.toString()\n\tconst sliceMode = source === null\n\tlet regex: RegExp\n\tif (!sliceMode) {\n\t\tsource = getValue(source)\n\t\tregex = new RegExp(escapeRegExp(source), \"g\")\n\t}\n\ttarget = getValue(target)\n\tconst findStart = /(\\)[^{]*{)/\n\tconst findEnd = /}?$/\n\tif (!sliceMode && !regex.test(newFuncStr)) console.warn(\"Nothing to inject.\")\n\tswitch (where) {\n\t\tcase \"before\":\n\t\t\tif (sliceMode) newFuncStr = newFuncStr.replace(findStart, `$1${target}`)\n\t\t\telse newFuncStr = newFuncStr.replace(regex, `${target}${source}`)\n\t\t\tbreak\n\t\tcase \"replace\":\n\t\t\tif (sliceMode) newFuncStr = `${target}`\n\t\t\telse newFuncStr = newFuncStr.replace(regex, `${target}`)\n\t\t\tbreak\n\t\tcase \"after\":\n\t\t\tif (sliceMode) newFuncStr = newFuncStr.replace(findEnd, `${target}$1`)\n\t\t\telse newFuncStr = newFuncStr.replace(regex, `${source}${target}`)\n\t\t\tbreak\n\t\tdefault:\n\t\t\tthrow new Error('where Parameter must be \"before\", \"replace\" or \"after\"')\n\t}\n\tconst newFunc = new Function(`return (${newFuncStr})`)()\n\tnewFunc.prototype = func.prototype\n\treturn newFunc\n}\n","import { injectCode } from \"./helpers\"\nimport { main } from \"./injects\"\nimport gameType, { Cppkies as CppkiesType } from \"./gameType\"\nimport { Building } from \"./buildings\"\nimport master from \"./vars\"\ndeclare global {\n\tinterface Window {\n\t\tGame: gameType\n\t\tCppkies: CppkiesType\n\t}\n}\nlet CppkiesExport: CppkiesType\n//Check if Cppkies is already created\nif (window.Cppkies) {\n\t//If so, just reexport it\n\tconsole.warn(\"Duplicate Cppkies\")\n\tCppkiesExport = window.Cppkies\n} else {\n\t//Set it to master, and set some stuff\n\tCppkiesExport = master\n\tCppkiesExport.Building = Building\n\tCppkiesExport.injectCode = injectCode\n\t//Inject maingame and create hooks\n\tmain().then((answer: Record<string, Function[]>) => {\n\t\tCppkiesExport.hooks = answer\n\t\twindow.Game.Note.call({}, \"Cppkies loaded!\", \"\", [32, 17])\n\t\twindow.Game.Win(\"Third-party\")\n\t\t//Run all onLoad events\n\t\tmaster.onLoad.forEach(val => val())\n\t\t//Force all new onLoad events to run\n\t\tmaster.onLoad = new Proxy(master.onLoad, {\n\t\t\tset: (_target, key, value): boolean => {\n\t\t\t\tif (key !== \"length\") value()\n\t\t\t\treturn true\n\t\t\t},\n\t\t})\n\t})\n}\nexport default CppkiesExport\n","import gameType, { Cppkies as CppkiesType } from \"./gameType\"\n\ndeclare global {\n\tinterface Window {\n\t\tGame: gameType\n\t\tCppkies: CppkiesType\n\t}\n}\n//The *main* variable\nconst master: CppkiesType = {\n\thooks: {},\n\ticonLink: \"\",\n\tbuildingLink: \"\",\n\tbuildingHooks: {},\n\tbuildingHooksById: [],\n\tonLoad: [],\n\tBuilding: null,\n\tinjectCode: null,\n}\nexport default master\n","import gameType, { FoolBuilding, Cppkies, AddEvent } from \"./gameType\"\nimport master from \"./vars\"\ndeclare let Game: gameType\ndeclare let Cppkies: Cppkies\ndeclare const l: (id: string) => HTMLElement\ndeclare const AddEvent: AddEvent\ndeclare const PlaySound: (url: string, volume?: number, pitch?: number) => void\ninterface Art {\n\tbase: string\n\txV: number\n\tyV: number\n\tw: number\n\trows: number\n\tx: number\n\ty: number\n\tpic: string\n\tbg: string\n}\nexport class Building extends Game.Object {\n\tconstructor(\n\t\tname: string,\n\t\tcommonName: string,\n\t\tdesc: string,\n\t\ticon: [number, number],\n\t\tart: Art,\n\t\tcpsFunc: (me: Building) => number,\n\t\tbuyFunction: () => void,\n\t\tfoolObject: FoolBuilding,\n\t\tbuildingSpecial: [string, string]\n\t) {\n\t\tsuper(\n\t\t\tname,\n\t\t\tcommonName,\n\t\t\tdesc,\n\t\t\ticon[0],\n\t\t\ticon[1],\n\t\t\tart,\n\t\t\t0, //Game automatically calculates Price and BaseCps\n\t\t\tcpsFunc,\n\t\t\tbuyFunction\n\t\t)\n\t\t//Manually relink canvases and contexts because Orteil made it so new buildings break the old canvas and context links\n\t\tfor (const i in Game.ObjectsById) {\n\t\t\tif (parseInt(i) > 0) {\n\t\t\t\tconst me = Game.ObjectsById[i]\n\t\t\t\tme.canvas = l(`rowCanvas${i}`)\n\t\t\t\tme.ctx = me.canvas.getContext(\"2d\")\n\t\t\t\t//Relink their events too\n\t\t\t\tAddEvent(me.canvas, \"mouseover\", () => {\n\t\t\t\t\tme.mouseOn = true\n\t\t\t\t})\n\t\t\t\tAddEvent(me.canvas, \"mouseout\", () => {\n\t\t\t\t\tme.mouseOn = false\n\t\t\t\t})\n\t\t\t\tAddEvent(me.canvas, \"mousemove\", e => {\n\t\t\t\t\tconst box = me.canvas.getBoundingClientRect()\n\t\t\t\t\tme.mousePos[0] = e.pageX - box.left\n\t\t\t\t\tme.mousePos[1] = e.pageY - box.top\n\t\t\t\t})\n\t\t\t}\n\t\t}\n\t\tconst localBuildingLink = Cppkies.buildingLink + \"\",\n\t\t\tlocalIconLink = Cppkies.iconLink + \"\"\n\t\t// This is the name, description, and icon used during Business Season\n\t\tif (foolObject) Game.foolObjects[name] = foolObject\n\t\t// The name of this building's golden cookie buff and debuff\n\t\tif (buildingSpecial) Game.goldenCookieBuildingBuffs[name] = buildingSpecial\n\n\t\t//CCSE.ReplaceBuilding(name)\n\n\t\tif (localIconLink) {\n\t\t\tmaster.buildingHooksById[this.id].tooltip.push(function(obj, ret) {\n\t\t\t\tif (this.locked) return ret\n\t\t\t\telse\n\t\t\t\t\treturn ret.replace(\n\t\t\t\t\t\t\"background-position\",\n\t\t\t\t\t\t`background-image:url(${localIconLink});background-position`\n\t\t\t\t\t)\n\t\t\t})\n\t\t}\n\n\t\t/*if (CCSE.save.Buildings[name]) {\n\t\t\tvar saved = CCSE.save.Buildings[name]\n\t\t\tme.amount = saved.amount\n\t\t\tme.bought = saved.bought\n\t\t\tme.totalCookies = saved.totalCookies\n\t\t\tme.level = saved.level\n\t\t\tme.muted = saved.muted\n\t\t\tme.free = saved.free ? saved.free : 0 // Left this out earlier, can't expect it to be there\n\t\t\tme.minigameSave = saved.minigameSave\n\n\t\t\tGame.BuildingsOwned += me.amount\n\t\t} else {\n\t\t\tvar saved = {}\n\t\t\tsaved.amount = 0\n\t\t\tsaved.bought = 0\n\t\t\tsaved.totalCookies = 0\n\t\t\tsaved.level = 0\n\t\t\tsaved.muted = 0\n\t\t\tsaved.minigameSave = \"\"\n\n\t\t\tCCSE.save.Buildings[name] = saved\n\t\t}*/\n\n\t\tGame.BuildStore()\n\t\tif (localBuildingLink) {\n\t\t\tmaster.hooks.postBuildStore.push(() => {\n\t\t\t\tl(\n\t\t\t\t\t`productIcon${this.id}`\n\t\t\t\t).style.backgroundImage = `url(${localBuildingLink})`\n\t\t\t\tl(\n\t\t\t\t\t`productIconOff${this.id}`\n\t\t\t\t).style.backgroundImage = `url(${localBuildingLink})`\n\t\t\t})\n\t\t}\n\t\tGame.BuildStore()\n\t\tthis.canvas = l(`rowCanvas${this.id}`)\n\t\tthis.ctx = this.canvas.getContext(\"2d\")\n\t\tthis.context = this.ctx\n\t\tthis.pics = []\n\t\tconst muteDiv = document.createElement(\"div\")\n\t\tmuteDiv.className = \"tinyProductIcon\"\n\t\tmuteDiv.id = `mutedProduct${this.id}`\n\t\tmuteDiv.style.display = \"none\"\n\t\tif (localBuildingLink)\n\t\t\tmuteDiv.style.backgroundImage = `url(${localBuildingLink})`\n\t\tmuteDiv.style.backgroundPositionX = `-${icon[0]}px`\n\t\tmuteDiv.style.backgroundPositionY = `-${icon[1]}px`\n\t\tmuteDiv.addEventListener(\"click\", () => {\n\t\t\tthis.mute(0)\n\t\t\tPlaySound(this.muted ? \"snd/clickOff.mp3\" : \"snd/clickOn.mp3\")\n\t\t})\n\n\t\tAddEvent(this.canvas, \"mouseover\", () => {\n\t\t\tthis.mouseOn = true\n\t\t})\n\t\tAddEvent(this.canvas, \"mouseout\", () => {\n\t\t\tthis.mouseOn = false\n\t\t})\n\t\tAddEvent(this.canvas, \"mousemove\", e => {\n\t\t\tconst box = this.canvas.getBoundingClientRect()\n\t\t\tthis.mousePos[0] = e.pageX - box.left\n\t\t\tthis.mousePos[1] = e.pageY - box.top\n\t\t})\n\t\tl(\"buildingsMute\").appendChild(muteDiv)\n\t\tGame.recalculateGains = 1\n\t}\n}\n","import { injectCode } from \"./helpers\"\nimport Game, { Cppkies } from \"./gameType\"\nimport master from \"./vars\"\n\ndeclare global {\n\tinterface Window {\n\t\tGame: Game\n\t\tCppkies: Cppkies\n\t\tBeautify: Function\n\t}\n}\n/**\n * Injects functions for basegame\n * @returns A promise\n */\nexport function main(): Promise<{ [key: string]: Function[] }> {\n\treturn new Promise(resolve => {\n\t\tclass Injection {\n\t\t\tconstructor(\n\t\t\t\tpublic value: string,\n\t\t\t\tpublic defValue: [],\n\t\t\t\tpublic func?: Function\n\t\t\t) {}\n\t\t}\n\t\tconst dummy = {}\n\t\tconst injections: Array<Injection> = [\n\t\t\t//// -- Custom menus -- ////\n\t\t\t/*\n\t\t\tHooks that allow you to add new stuff do the menu \n\n\t\t\tcustomOptionsMenu()\n\t\t\tAllows you to add entries to the options menu\n\n\t\t\tcustomStatsMenu()\n\t\t\tAllows you to add entries to the stats menu\n\n\t\t\tcustomInfoMenu()\n\t\t\tAllows you to add entries to the info menu\n\n\t\t\tcustomMenu()\n\t\t\tAllows you to add entries to all menus\n\t\t\t*/\n\t\t\tnew Injection(\"customMenu\", [], () => {\n\t\t\t\twindow.Game.UpdateMenu = injectCode(\n\t\t\t\t\twindow.Game.UpdateMenu,\n\t\t\t\t\tnull,\n\t\t\t\t\t`\n\t\t\t\t\t// Cppkies injection\n\t\t\t\t\tswitch (Game.onMenu) {\n\t\t\t\t\t\tcase \"prefs\":\n\t\t\t\t\t\t\tfor(const i in Cppkies.hooks.customOptionsMenu) Cppkies.hooks.customOptionsMenu[i]();\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tcase \"stats\":\n\t\t\t\t\t\t\tfor(const i in Cppkies.hooks.customStatsMenu) Cppkies.hooks.customStatsMenu[i]();\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tcase \"log\":\n\t\t\t\t\t\t\tfor(const i in Cppkies.hooks.customInfoMenu) Cppkies.hooks.customInfoMenu[i]();\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tdefault:\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t\tfor(const i in Cppkies.hooks.customMenu) Cppkies.hooks.customMenu[i]();\n\t\t\t\t\t`,\n\t\t\t\t\t\"before\"\n\t\t\t\t)\n\t\t\t}),\n\t\t\tnew Injection(\"customOptionsMenu\", []),\n\t\t\tnew Injection(\"customStatsMenu\", []),\n\t\t\tnew Injection(\"customInfoMenu\", []),\n\t\t\t//// -- Data manipulation -- ////\n\t\t\t/*\n\t\t\tGeneral Description\n\n\t\t\tcustomLoad() \n\t\t\tAllows you to execute a function on data load, useful for custom data loading\n\n\t\t\tcustomReset(hard)\n\t\t\tAllows you to execute a function on data load, useful for custom data resetting\n\t\t\thard: bool - whether or not this is a hard reset\n\t\t\t*/\n\t\t\tnew Injection(\"customLoad\", [], () => {\n\t\t\t\twindow.Game.LoadSave = injectCode(\n\t\t\t\t\twindow.Game.LoadSave,\n\t\t\t\t\t\"if (Game.prefs.showBackupWarning==1)\",\n\t\t\t\t\t`\n\t\t\t\t\t// Cppkies injection\n\t\t\t\t\tfor(const i in Cppkies.hooks.customLoad) Cppkies.hooks.customLoad[i](); \n\t\t\t\t\t`,\n\t\t\t\t\t\"before\"\n\t\t\t\t)\n\t\t\t}),\n\t\t\tnew Injection(\"customReset\", [], () => {\n\t\t\t\twindow.Game.Reset = injectCode(\n\t\t\t\t\twindow.Game.Reset,\n\t\t\t\t\tnull,\n\t\t\t\t\t`\n\t\t\t\t\t// Cppkies injection\n\t\t\t\t\tfor(const i in Cppkies.hooks.customReset) Cppkies.hooks.customReset[i](hard);\n\t\t\t\t\t`,\n\t\t\t\t\t\"before\"\n\t\t\t\t)\n\t\t\t}),\n\t\t\t//// -- Misc -- ////\n\t\t\t/**\n\t\t\tGeneral Description\n\n\t\t\tcustomBeautify(value, floats, ret)\n\t\t\tAllows you to \"Insert Text Here\" should return the new string of a beautied \n\t\t\tvalue - original value\n\t\t\tfloats - The floating value\n\t\t\tret - current value\n\n\t\t\t*/\n\t\t\tnew Injection(\"customBeautify\", [], () => {\n\t\t\t\twindow.Beautify = injectCode(\n\t\t\t\t\twindow.Beautify,\n\t\t\t\t\t\"return negative?'-'+output:output+decimal;\",\n\t\t\t\t\t`\n\t\t\t\t\t// Cppkies injection\n\t\t\t\t\tlet ret = negative?'-'+output:output+decimal;\n\t\t\t\t\tfor(const i in Cppkies.hooks.customBeautify) {\n\t\t\t\t\t\tlet returnedValue = Cppkies.hooks.customBeautify[i](value, floats, ret)\n\t\t\t\t\t\tret = returnedValue ? returnedValue : ret\n\t\t\t\t\t};\n\t\t\t\t\treturn ret;\n\t\t\t\t\t`,\n\t\t\t\t\t\"replace\"\n\t\t\t\t)\n\t\t\t}),\n\t\t\t//// -- Tooltips -- ////\n\t\t\t/*\n\t\t\tGeneral Description\n\t\t\t\n\t\t\tcustomTooltipDraw(from, text, origin)\n\t\t\tAllows you to \"Insert Text Here\"\n\t\t\tfrom - \n\t\t\ttext - \n\t\t\torigin - \n\n\t\t\tcustomTooltipUpdate()\n\t\t\tAllows you to \"Insert Text Here\"\n\n\t\t\t*/\n\t\t\tnew Injection(\"customTooltipDraw\", [], () => {\n\t\t\t\twindow.Game.tooltip.draw = injectCode(\n\t\t\t\t\twindow.Game.tooltip.draw,\n\t\t\t\t\tnull,\n\t\t\t\t\t`\n\t\t\t\t\t// Cppkies injection\n\t\t\t\t\tfor(const i in Cppkies.hooks.customTooltipDraw) Cppkies.hooks.customTooltipDraw[i](from, text, origin);\n\t\t\t\t\t`,\n\t\t\t\t\t\"before\"\n\t\t\t\t)\n\t\t\t}),\n\t\t\tnew Injection(\"customTooltipUpdate\", [], () => {\n\t\t\t\twindow.Game.tooltip.update = injectCode(\n\t\t\t\t\twindow.Game.tooltip.update,\n\t\t\t\t\tnull,\n\t\t\t\t\t`\n\t\t\t\t\t// Cppkies injection\n\t\t\t\t\tfor(const i in Cppkies.hooks.customTooltipUpdate) Cppkies.hooks.customTooltipUpdate[i]();\n\t\t\t\t\t`,\n\t\t\t\t\t\"before\"\n\t\t\t\t)\n\t\t\t}),\n\t\t\t//// -- Ascension -- ////\n\t\t\t/**\n\t\t\tGeneral Description\n\t\t\t\n\t\t\tcustomHowMuchPrestige(chips, ret)\n\t\t\tAllows you to \"Insert Text Here\" should return \"value\"\n\t\t\tchips - How many chips \n\t\t\tret - \n\n\t\t\tcustomHeavenlyMultiplier() // TODO\n\t\t\tAllows you to \"Insert Text Here\"\n\n\t\t\tUpdateAscensionModePrompt() // TODO\n\t\t\tAllows you to \"Insert Text Here\"\n\n\t\t\t*/\n\t\t\tnew Injection(\"customHowMuchPrestige\", [], () => {\n\t\t\t\twindow.Game.HowMuchPrestige = injectCode(\n\t\t\t\t\tinjectCode(\n\t\t\t\t\t\twindow.Game.HowMuchPrestige,\n\t\t\t\t\t\t\"return\",\n\t\t\t\t\t\t\"let ret =\",\n\t\t\t\t\t\t\"replace\"\n\t\t\t\t\t),\n\t\t\t\t\t\";\",\n\t\t\t\t\t`\n\t\t\t\t\t// Cppkies injection\n\t\t\t\t\tfor(const i in Cppkies.hooks.customHowManyCookiesReset){ \n\t\t\t\t\t\treturnedValue = Cppkies.hooks.customHowManyCookiesReset[i](chips, ret);\n\t\t\t\t\t\tret = returnedValue ? returnedValue : ret\n\t\t\t\t\t}\n\t\t\t\t\treturn ret;\n\t\t\t\t\t`,\n\t\t\t\t\t\"after\"\n\t\t\t\t)\n\t\t\t}),\n\t\t\tnew Injection(\"customHeavenlyMultiplier\", []), //TODO\n\t\t\tnew Injection(\"UpdateAscensionModePrompt\", []), //TODO\n\t\t\tnew Injection(\"customReincarnate\", []),\n\t\t\tnew Injection(\"customAscend\", []),\n\t\t\tnew Injection(\"customUpdateAscend\", []),\n\t\t\tnew Injection(\"customBuildAscendTree\", []),\n\t\t\tnew Injection(\"customAscend\", []),\n\t\t\t//TODO: Everything else\n\t\t\t//Should I declare functions in this file or in another place entirely? - Bob\n\t\t\t//I have to go so just dm me the answer to the question when you have the time\n\n\t\t\t//// -- Sugar Lump -- ////\n\t\t\t//// -- Economics -- ////\n\t\t\t//// -- Shimmers -- ////\n\t\t\t//// -- Particles -- ////\n\t\t\t//// -- Notifications -- ////\n\t\t\t//// -- Prompts -- ////\n\t\t\t//// -- Menus -- ////\n\t\t\t//// -- Buildings -- ////\n\t\t\tnew Injection(\"customGrandmaPic\", [], () => {\n\t\t\t\twindow.Game.Objects.Grandma.art.pic = injectCode(\n\t\t\t\t\twindow.Game.Objects.Grandma.art.pic,\n\t\t\t\t\t\"return choose(list)+'.png'\",\n\t\t\t\t\t`// Cppkies injection\n\t\t\t\t\tlist = list.concat(Cppkies.hooks.customGrandmaPic.map(val=>val() || null).filter(val=>val !== null))\n\t\t\t\t\t`,\n\t\t\t\t\t\"before\"\n\t\t\t\t)\n\t\t\t}),\n\t\t\t//// -- Unsorted, for quick injections -- ////\n\t\t\tnew Injection(\"postBuildStore\", [], () => {\n\t\t\t\tconst oldString = window.Game.BuildStore.toString()\n\t\t\t\twindow.Game.BuildStore = new Proxy(window.Game.BuildStore, {\n\t\t\t\t\tapply: (target, _this, args): void => {\n\t\t\t\t\t\ttarget.apply(_this, args)\n\t\t\t\t\t\tfor (const i in master.hooks.postBuildStore)\n\t\t\t\t\t\t\tmaster.hooks.postBuildStore[i]()\n\t\t\t\t\t},\n\t\t\t\t})\n\t\t\t\twindow.Game.BuildStore.toString = (): string => oldString\n\t\t\t}),\n\t\t]\n\t\tinjections.forEach(inject => {\n\t\t\tdummy[inject.value] = inject.defValue\n\t\t\tif (inject.func) inject.func()\n\t\t})\n\t\t//Misc stuff\n\t\twindow.Game.Loader.Load = injectCode(\n\t\t\twindow.Game.Loader.Load,\n\t\t\t\"img.src=this.domain\",\n\t\t\t\"img.src=(assets[i].indexOf('http') !== -1 ? \\\"\\\" : this.domain)\",\n\t\t\t\"replace\"\n\t\t)\n\t\tresolve(dummy)\n\t})\n}\n"],"names":["getValue","value","Function","escapeRegExp","str","replace","injectCode","func","source","target","where","regex","newFuncStr","toString","sliceMode","RegExp","findStart","findEnd","test","console","warn","Error","newFunc","prototype","CppkiesExport","master","hooks","iconLink","buildingLink","buildingHooks","buildingHooksById","onLoad","Building","name","commonName","desc","icon","art","cpsFunc","buyFunction","foolObject","buildingSpecial","_super","i","parseInt","me_1","Game","ObjectsById","canvas","l","ctx","getContext","AddEvent","mouseOn","e","box","getBoundingClientRect","mousePos","pageX","left","pageY","top","localBuildingLink","Cppkies","localIconLink","foolObjects","goldenCookieBuildingBuffs","_this","id","tooltip","push","obj","ret","locked","BuildStore","postBuildStore","style","backgroundImage","context","pics","muteDiv","document","createElement","className","display","backgroundPositionX","backgroundPositionY","addEventListener","mute","PlaySound","muted","appendChild","recalculateGains","__extends","Object","window","Promise","resolve","defValue","dummy","injections","Injection","UpdateMenu","LoadSave","Reset","Beautify","draw","update","HowMuchPrestige","Objects","Grandma","pic","oldString","Proxy","apply","args","forEach","inject","Loader","Load","then","answer","Note","call","Win","val","set","_target","key"],"mappings":"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"}